??mi.empirical
library(entropy)
?mi.empirical()
data(USArrests)
head(USArrests)
library(infotheo)
x = runif(100)
y = x + (runif(20)-10)
z = rep(c(1,2,3,4),length.out=100)
condinformation(x,y,z)
x
x = round(runif(100))
y = round(x + (runif(20)-10))
z = rep(c(1,2,3,4),length.out=100)
condinformation(x,y,z)
x = round(runif(100))
y = round(x + (runif(20)-10))
z = round(x/25)
condinformation(x,y,z)
plot(x,z)
hist(x)
x = round(runif(100)*100)
y = round(x + (runif(20)-10))
z = round(x/25)
condinformation(x,y,z)
plot(x,z)
d = read.csv("~/Documents/Bristol/FTRHumanCapital/FTRHumanCapital/data/Languages/wals_language.csv/language.csv")
d$family
condinformation(wordOrder,prep,family)
wordOrder = d$X81A.Order.of.Subject..Object.and.Verb
prep = d$X85A.Order.of.Adposition.and.Noun.Phrase
family = d$family
condinformation(wordOrder,prep,family)
mi.empirical(cbind(wordOrder,prep))
table(wordOrder,prep)
?mi.empirical
mi.empirical(table(wordOrder,prep))
condinformation(wordOrder,prep,family)
table(wordOrder,family)
?condinformation
mutinformation(wordOrder,prep)
condinformation(wordOrder,prep,family)
?condinformation
condinformation(wordOrder,prep,sample(family))
condinformation(wordOrder,prep,sample(family))
condinformation(wordOrder,prep,sample(family))
condinformation(wordOrder,prep,sample(family))
condinformation(wordOrder,prep,sample(family))
condinformation(wordOrder,prep,sample(family))
condinformation(wordOrder,prep,(family))
family2 = sample(d$family)
condinformation(wordOrder,prep,cbind(family,family2)
condinformation(wordOrder,prep,cbind(family,family2))
?interinformation
data(USArrests)
dat<-discretize(USArrests)
ii <- interinformation(dat, method = "sg")
ii
library(fields)
rdist.earth()
?rdist.earth()
??readOGR
library(rgdal)
readOGR("~/Desktop/autotyp.areas.kml")
readRDS("~/Desktop/autotyp_all_data_list.rds")
d = readRDS("~/Desktop/autotyp_all_data_list.rds")
names(d)
head(names(d))
head(d$Agreement_VPolyagreement.Presence.v2)
sort(names(d))
View(names(d))
head(d$NP_structure_presence_NPHeadSemConstraint.semantic.Presence)
head(d$Longitude)
head(d$Register_Subsistence)
head(d$Register)
head(d$Aegister)
head(d$Area)
?interinformation
d = matrix(nrow=69, ncol=91)
d = matrix(sample(c(0,1),69*91, replace=T), nrow=69, ncol=91)
d
library(infotheo)
library(party)
?ctree
d = matrix(sample(c(0,1),69*91, replace=T), nrow=69, ncol=91)
d = as.data.frame(d)
names(d)
v = names(d)[1]
ct=  ctree(formula(paste(v,"~ .")),
data = d)
ct
plot(ct)
summary(ct)
ct
predict(ct)
x = varimp(ct)
x = c(0,0,0,0,1,1,1,1)
y = c(1,1,1,1,0,1,0,1)
mutinformation(x,y)
y = c(1,1,1,1,0,0,0,0)
mutinformation(x,y)
?mutinformation(x,y,method = )
natstobits(mutinformation(x,y))
?ctree
ct=  ctree(formula(paste(v,"~ .")),
data = d,
controls = ctree_control(mincriterion = 0.99999))
ct
d[,2] = (1+d[,1]) % 2
d[,2] = (1+d[,1]) %% 2
ct=  ctree(formula(paste(v,"~ .")),
data = d,
controls = ctree_control(mincriterion = 0.99999))
ct
plot(ct)
ct@tree
x = ct@tree
x
length(x)
x[1]
x[2]
x[]
x[3]
x[4]
names(x)
x$ssplits
x$psplits
x[5]
ct@responses
ct@tree
x = ct@tree
?"BinaryTree-class"
nodes(x)
nodes(ct)
treeresponse(ct)
x
nchar(x)
x$terminal
x@terminal
x[4]
x[5]
x[6]
x[7]
x[8]
d = matrix(sample(c(0,1),69*91, replace=T), nrow=69, ncol=91)
d = as.data.frame(d)
ct=  ctree(formula(paste(v,"~ .")),
data = d,
controls = ctree_control(mincriterion = 0.99999))
plot(ct)
ct@tree$right
ct@tree$right$right$terminal
ct@tree$right
ct@tree$left
d[,2] = d[,1]
ct=  ctree(formula(paste(v,"~ .")),
data = d,
controls = ctree_control(mincriterion = 0.99999))
ct@tree$right
ct@tree$left
dependencies = 0
for(v in names(d)){
ct=  ctree(formula(paste(v,"~ .")),
data = d,
controls = ctree_control(mincriterion = 0.99999))
if(!is.null(ct@tree$right)){
dependencies = dependencies+1
}
}
dependencies
baseline = replicate(getBaseline(),n = 100)
getBaseline = function(){
dependencies = 0
for(v in names(d)){
ct=  ctree(formula(paste(v,"~ .")),
data = d,
controls = ctree_control(mincriterion = 0.99999))
if(!is.null(ct@tree$right)){
dependencies = dependencies+1
}
}
}
baseline = replicate(getBaseline(),n = 100)
where(ct)
plot(ct)
d[,2] = d[,1]
ct=  ctree(formula(paste(v,"~ .")),
data = d,
controls = ctree_control(mincriterion = 0.99999))
plot(ct)
v = "V1"
plot(ct)
ct=  ctree(formula(paste(v,"~ .")),
data = d,
controls = ctree_control(mincriterion = 0.99999))
plot(ct)
where(ct)
length(unique(where(ct))
length(unique(where(ct)))
length(unique(where(ct)))
getBaseline = function(){
d = matrix(sample(c(0,1),69*91, replace=T), nrow=69, ncol=91)
d = as.data.frame(d)
# Count dependencies
dependencies = 0
# For each variable
for(v in names(d)){
# Get a deterministic binary tree
ct=  ctree(formula(paste(v,"~ .")),
data = d,
controls = ctree_control(mincriterion = 0.99999))
# Add number of terminal nodes -1
dependencies = dependencies +
(length(unique(where(ct))) -1)
}
return(dependencies)
}
getBaseline()
getBaseline = function(){
d = matrix(sample(c(0,1),69*91, replace=T), nrow=69, ncol=91)
d = as.data.frame(d)
# Count dependencies
dependencies = 0
# For each variable
for(v in names(d)){
# Get a deterministic binary tree
ct=  ctree(formula(paste(v,"~ .")),
data = d,
controls = ctree_control(mincriterion = 0.99999))
# Add number of terminal nodes -1
dependencies = dependencies +
(length(unique(where(ct))) -1)
}
return(dependencies)
}
baseline = replicate(getBaseline(),n = 100)
hist(baseline)
d[,2] = d[,1]
v = "V1"
ct=  ctree(formula(paste(v,"~ .")),
data = d,
controls = ctree_control(mincriterion = 0.99999))
(length(unique(where(ct))) -1)
table(baseline)
library(party)
getBaseline = function(){
d = matrix(sample(c(0,1),69*91, replace=T), nrow=69, ncol=91)
d = as.data.frame(d)
# Count dependencies
dependencies = 0
# For each variable
for(v in names(d)){
# Get a deterministic binary tree
ct=  ctree(formula(paste(v,"~ .")),
data = d,
controls = ctree_control(mincriterion = 0.99999))
# Add number of terminal nodes -1
dependencies = dependencies +
(length(unique(where(ct))) -1)
}
return(dependencies)
}
baseline = replicate(getBaseline(),n = 1000)
table(baseline)
d = matrix(sample(c(0,1),69*91, replace=T), nrow=69, ncol=91)
d = as.data.frame(d)
indoEuropean = d[1:38,]
otherLangs = d[39:ncol(d),]
apply(indoEuropean,2,function(X){
length(unique(X))==1
})
sum()
sum(apply(indoEuropean,2,function(X){
length(unique(X))==1
}))
getBaseline2 = function(){
d = matrix(sample(c(0,1),69*91, replace=T), nrow=69, ncol=91)
d = as.data.frame(d)
indoEuropean = d[1:38,]
otherLangs = d[39:ncol(d),]
commonIE = apply(indoEuropean,2,function(X){
length(unique(X))==1
})
sum(commonIE)
}
baseline2 = replicate(getBaseline2(),n = 1000)
table(baseline2)
9/69
1/69
library(ggthemes)
library(stringr)
library(gender)
setwd("~/Documents/Conferences/Evolang12/genderBias2018/processing/")
e12l = readLines("../data/EvoLang12 Proceedings.html")
e12l = paste0(e12l,collapse="")
e12l = strsplit(e12l,'div href="papertemplate')[[1]]
nums = str_extract_all(e12l, "proceedings/papertemplate\\.html\\?p=([0-9]+)")
nums = unlist(str_extract_all(nums,"[0-9]+"))
authors = str_extract_all(e12l, ';font-size:0\\.8em">[^<]+<')
authors = str_extract_all(authors, '>[^<]+<')
authors = gsub("[<>]","",authors)
lastAuthor = sapply(authors,function(X){
x = strsplit(X,",")[[1]]
trimws(x[length(x)])
})
numAuthors = sapply(authors,function(X){
length(strsplit(X,",")[[1]])
})
lastAuthor_firstName = sapply(lastAuthor,function(X){
strsplit(X," ")[[1]][1]
})
g = data.frame(
id = nums,
lastAuthor = lastAuthor,
lastAuthor_firstName = lastAuthor_firstName,
numAuthors = numAuthors
)
rownames(g) = NULL
g = g[g$numAuthors>1,]
lastAuthor_gender = gender(lastAuthor_firstName)
g$gender = lastAuthor_gender[match(g$lastAuthor_firstName,
lastAuthor_gender$name),]$gender
g[g$lastAuthor_firstName=="Cat",]$gender = "female"
g[g$lastAuthor_firstName=="Lucía",]$gender = "female"
g[g$lastAuthor_firstName=="Balthasar",]$gender = "male"
g[g$lastAuthor_firstName=="Friedemann",]$gender = "male"
g[g$lastAuthor_firstName=="Freek",]$gender = "male"
g[g$lastAuthor_firstName=="Marlize",]$gender = "female"
g[g$lastAuthor_firstName=="Slawomir",]$gender = "male"
g[g$lastAuthor_firstName=="Włodzisław",]$gender = "male"
g[g$lastAuthor_firstName=="H.",]$gender = "male"
write.csv(g,"../data/E12_lastAuthorGenders.csv",fileEncoding = "UTF-8")
g2 = read.csv("../data/LastAuthorsE9E10E11.csv",stringsAsFactors = F)
g2[!is.na(g2$lastAuthorGender) & g2$lastAuthorGender=="female",]$lastAuthorGender = "F"
g2[!is.na(g2$lastAuthorGender) & g2$lastAuthorGender=="male",]$lastAuthorGender = "M"
d = read.csv("../data/EvoLang_Scores_8_to_12_WITH_NUMS.csv",stringsAsFactors = F)
d$lastAuthorGender = NA
sel =d$conference %in% c("E9","E10","E11")
d[sel,]$lastAuthorGender = g2[match(d[sel,]$num,g2$id),]$lastAuthorGender
e12g = read.csv("../data/AnonEvoLangDat2018 - Sheet3.csv",stringsAsFactors = F)
codes12 = read.csv("../data/abstracts/EvoLang12/numberCodes.csv", stringsAsFactors = F)
e12g = e12g[e12g$NumAuths>1,]
e12g$num = codes12[match(e12g$Number.Code,codes12$code),]$num
sel =d$conference =="E12"
d[sel,]$lastAuthorGender = e12g[match(d[sel,]$num,e12g$num),]$LastAuthGender
d = d[!is.na(d$lastAuthorGender),]
d$review = "single"
d$review[d$conference %in% c("E11","E12")] = "double"
boxplot(d$Score.mean~ paste(d$review,d$FirstAuthorGender,d$lastAuthorGender))
summary(aov(d$Score.mean ~ d$FirstAuthorGender * d$lastAuthorGender * d$review))
summary(aov(
Score.mean ~ FirstAuthorGender * lastAuthorGender + review + review:FirstAuthorGender + review:FirstAuthorGender:lastAuthorGender, data=d))
library(gplots)
plotmeans(d$Score.mean~ paste(d$review,d$FirstAuthorGender,d$lastAuthorGender))
table(d$FirstAuthorGender,d$lastAuthorGender,d$conference)
library(lme4)
d$Score.mean.scaled = scale(d$Score.mean)
d$FirstAuthorGender = as.factor(d$FirstAuthorGender)
d$lastAuthorGender = as.factor(d$lastAuthorGender)
d$review = as.factor(d$review)
d$format = as.factor(d$format)
contrasts(d$FirstAuthorGender) <- contr.sum(2)/2
contrasts(d$lastAuthorGender) <- contr.sum(2)/2
contrasts(d$review) <- contr.sum(2)/2
contrasts(d$format) <- contr.sum(2)/2
d$review = factor(d$review,levels = c("single",'double'))
m1 = lmer(Score.mean.scaled ~ FirstAuthorGender * lastAuthorGender * review + format + (1|conference),data=d)
summary(m1)
x = summary(m1)
write.csv(x$coefficients,"../results/FirstAndLastAuthors_Coef.csv")
m0 = lmer(Score.mean.scaled ~ FirstAuthorGender * lastAuthorGender + review*FirstAuthorGender + review:lastAuthorGender + format + (1|conference),data=d)
anova(m0,m1)
library(ggplot2)
source("../../genderBias2018_public/analysis/SplitViolinPlot.R")
d$FG2 = paste(d$review,d$FirstAuthorGender)
d$FG2 = factor(d$FG2, levels =c("single F","single M","double F","double M"))
ggplot(d,aes(x=FG2,y=Score.mean, fill=lastAuthorGender)) +
geom_split_violin() +
geom_boxplot(width=0.2, show.legend = F) +
scale_x_discrete(name="First Author Gender",
labels = c("F","M","F","M"))+
annotate("text", x = c(1.5,3.5), y = c(1.05,1.05), label=c("Single-Blind", "Double-Blind"), size=6) +
geom_vline(xintercept=2.5) +
scale_y_continuous(name="Score ranking", breaks = c(0,0.25,0.5,0.75,1)) +
scale_fill_grey(start = 0.55, end=0.8,name="Last Author Gender") +
theme(legend.position = "top",
panel.grid.major.x = element_blank())
d$FG3 = paste(d$conference,d$FirstAuthorGender)
ggplot(d,aes(x=FG3,y=Score.mean, fill=lastAuthorGender)) +
geom_split_violin() +
geom_boxplot(width=0.2, show.legend = F)
pdf("../../genderBias2018_public/results/LastAuthorReviewScores.pdf")
ggplot(d,aes(x=FG2,y=Score.mean, fill=lastAuthorGender)) +
geom_split_violin() +
geom_boxplot(width=0.2, show.legend = F) +
scale_x_discrete(name="First Author Gender",
labels = c("F","M","F","M"))+
annotate("text", x = c(1.5,3.5), y = c(1.05,1.05), label=c("Single-Blind", "Double-Blind"), size=6) +
geom_vline(xintercept=2.5) +
scale_y_continuous(name="Score ranking", breaks = c(0,0.25,0.5,0.75,1)) +
scale_fill_grey(start = 0.55, end=0.8,name="Last Author Gender") +
theme(legend.position = "top",
panel.grid.major.x = element_blank())
dev.off()
pdf("../../genderBias2018_public/results/LastAuthorReviewScores.pdf",
height=6)
ggplot(d,aes(x=FG2,y=Score.mean, fill=lastAuthorGender)) +
geom_split_violin() +
geom_boxplot(width=0.2, show.legend = F) +
scale_x_discrete(name="First Author Gender",
labels = c("F","M","F","M"))+
annotate("text", x = c(1.5,3.5), y = c(1.05,1.05), label=c("Single-Blind", "Double-Blind"), size=6) +
geom_vline(xintercept=2.5) +
scale_y_continuous(name="Score ranking", breaks = c(0,0.25,0.5,0.75,1)) +
scale_fill_grey(start = 0.55, end=0.8,name="Last Author Gender") +
theme(legend.position = "top",
panel.grid.major.x = element_blank())
dev.off()
pdf("../../genderBias2018_public/results/LastAuthorReviewScores.pdf",
height=4)
ggplot(d,aes(x=FG2,y=Score.mean, fill=lastAuthorGender)) +
geom_split_violin() +
geom_boxplot(width=0.2, show.legend = F) +
scale_x_discrete(name="First Author Gender",
labels = c("F","M","F","M"))+
annotate("text", x = c(1.5,3.5), y = c(1.05,1.05), label=c("Single-Blind", "Double-Blind"), size=6) +
geom_vline(xintercept=2.5) +
scale_y_continuous(name="Score ranking", breaks = c(0,0.25,0.5,0.75,1)) +
scale_fill_grey(start = 0.55, end=0.8,name="Last Author Gender") +
theme(legend.position = "top",
panel.grid.major.x = element_blank())
dev.off()
pdf("../../genderBias2018_public/results/LastAuthorReviewScores2.pdf",
height=4)
d$FG3 = paste(d$conference,d$FirstAuthorGender)
ggplot(d,aes(x=FG3,y=Score.mean, fill=lastAuthorGender)) +
geom_split_violin() +
geom_boxplot(width=0.2, show.legend = F)
dev.off()
d$conference = factor(d$conference,levels=c("E9","E10","E11","E12"))
pdf("../../genderBias2018_public/results/LastAuthorReviewScores2.pdf",
height=4)
d$FG3 = paste(d$conference,d$FirstAuthorGender)
ggplot(d,aes(x=FG3,y=Score.mean, fill=lastAuthorGender)) +
geom_split_violin() +
geom_boxplot(width=0.2, show.legend = F)
dev.off()
d$conference = factor(d$conference,levels=c("E9","E10","E11","E12"))
pdf("../../genderBias2018_public/results/LastAuthorReviewScores2.pdf",
height=4)
d$FG3 = paste(d$conference,d$FirstAuthorGender)
ggplot(d,aes(x=FG3,y=Score.mean, fill=lastAuthorGender)) +
geom_split_violin() +
geom_boxplot(width=0.2, show.legend = F) +
theme(legend.position = "top")
dev.off()
ggplot(d,aes(x=FG3,y=Score.mean, fill=lastAuthorGender)) +
geom_split_violin() +
geom_boxplot(width=0.2, show.legend = F) +
theme(legend.position = "top") +
xlab("First Author Gender")
d$FG3 = paste(d$conference,d$FirstAuthorGender)
d$FG3 = factor(d$FG3,levels=c("E9 F","E9 M","E10 F","E10 M","E11 F","E11 M","E12 F","E12 M"))
pdf("../../genderBias2018_public/results/LastAuthorReviewScores2.pdf",
height=4)
ggplot(d,aes(x=FG3,y=Score.mean, fill=lastAuthorGender)) +
geom_split_violin() +
geom_boxplot(width=0.2, show.legend = F) +
theme(legend.position = "top") +
xlab("First Author Gender") +
dev.off()
d$FG3 = paste(d$conference,d$FirstAuthorGender)
d$FG3 = factor(d$FG3,levels=c("E9 F","E9 M","E10 F","E10 M","E11 F","E11 M","E12 F","E12 M"))
pdf("../../genderBias2018_public/results/LastAuthorReviewScores2.pdf",
height=4)
ggplot(d,aes(x=FG3,y=Score.mean, fill=lastAuthorGender)) +
geom_split_violin() +
geom_boxplot(width=0.2, show.legend = F) +
theme(legend.position = "top") +
xlab("First Author Gender")
dev.off()
x
str(x)
dim(d)
save(x,"../../genderBias2018_public/results/LastAuthorReviewScores.Rdat")
save(x,file="../../genderBias2018_public/results/LastAuthorReviewScores.Rdat")
setwd("~/Documents/Conferences/Evolang12/genderBias2018_public/analysis/")
load("../results/LastAuthorReviewScores.Rdat")
x
library(sjPlot)
sjp.lmer(x)
sjp.lmer(m1)
sjp.lmer(m1,'fe')
pdf("../../genderBias2018_public/results/LastAuthorReviewScores3.pdf", height=4,width=5)
sjp.lmer(m1,'fe')
dev.off()
pdf("../../genderBias2018_public/results/LastAuthorReviewScores3.pdf", height=4,width=8)
sjp.lmer(m1,'fe')
dev.off()
pdf("../../genderBias2018_public/results/LastAuthorReviewScores3.pdf", height=4.5,width=8)
sjp.lmer(m1,'fe')
dev.off()
pdf("../../genderBias2018_public/results/LastAuthorReviewScores3.pdf", height=5,width=8)
sjp.lmer(m1,'fe')
dev.off()
?sjp.lmer
pdf("../../genderBias2018_public/results/LastAuthorReviewScores3.pdf", height=6,width=8)
sjp.lmer(m1,'fe')
dev.off()
pdf("../../genderBias2018_public/results/LastAuthorReviewScores3.pdf", height=5,width=8)
sjp.lmer(m1,'fe')
dev.off()
